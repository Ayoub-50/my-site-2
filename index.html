<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø°ÙƒÙŠ - Pinterest Style</title>
    <meta name="description" content="Ù…Ø¹Ø±Ø¶ ØµÙˆØ± Ø°ÙƒÙŠ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø¨Ø­Ø« Ù…ØªØ·ÙˆØ± ÙŠØªØ¹Ù„Ù… Ù…Ù† Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!--
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘           Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø°ÙƒÙŠ - Pinterest Style                  â•‘
    â•‘                      Smart Gallery v2.0                        â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    âœ¨ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©:
    
    1ï¸âƒ£ ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Query Expansion)
       - Ø§Ø¨Ø­Ø« Ø¹Ù† "mr robot" â†’ ÙŠØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ "mr robot hacker dark aesthetic cyberpunk"
       - Ù†ØªØ§Ø¦Ø¬ Ø£ÙØ¶Ù„ Ø¨ÙƒØ«ÙŠØ±!
       - Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ®ØµÙŠØµ (Ø§Ù†Ø¸Ø± QUERY_MAP ÙÙŠ Ø§Ù„ÙƒÙˆØ¯)
    
    2ï¸âƒ£ ØªØ¹Ù„Ù… Ù…Ù† Ø°ÙˆÙ‚Ùƒ (Taste Learning)
       - ÙŠØ­ÙØ¸ Ø¢Ø®Ø± 5 ØµÙˆØ± Ø´Ø§Ù‡Ø¯ØªÙ‡Ø§
       - ÙŠØ³ØªØ®Ø¯Ù… ÙˆØµÙÙ‡Ø§ Ù„ØªØ­Ø³ÙŠÙ† Ø¨Ø­Ø«Ùƒ
       - Ù…Ø­ÙÙˆØ¸ ÙÙŠ localStorage
    
    3ï¸âƒ£ ØµÙˆØ± Ù…Ø´Ø§Ø¨Ù‡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (Auto Related)
       - Ø§ÙØªØ­ ØµÙˆØ±Ø© â†’ Ø§Ù†ØªØ¸Ø± Ø«Ø§Ù†ÙŠØªÙŠÙ† â†’ ØµÙˆØ± Ù…Ø´Ø§Ø¨Ù‡Ø© ØªØ¸Ù‡Ø±!
       - Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙØ¹ÙŠÙ„/Ø§Ù„ØªØ¹Ø·ÙŠÙ„ Ù…Ù† Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª âš™ï¸
    
    4ï¸âƒ£ ØªØµÙ…ÙŠÙ… Pinterest Ø§Ø­ØªØ±Ø§ÙÙŠ
       - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯Ø§Ø¦Ù…Ø© ØªØ­Øª ÙƒÙ„ ØµÙˆØ±Ø©
       - Masonry Layout Ù…ØªØ¬Ø§ÙˆØ¨
       - Infinite Scroll
    
    âš™ï¸ ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ®ØµÙŠØµ:
    
    ğŸ“ ØªØºÙŠÙŠØ± API Key:
       Ø§Ø¨Ø­Ø« Ø¹Ù†: API_KEY: 'p72LAkg7...'
       Ø¶Ø¹ Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø®Ø§Øµ
    
    ğŸ” Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ:
       Ø§Ø¨Ø­Ø« Ø¹Ù†: QUERY_MAP
       Ø£Ø¶Ù: "Ø§Ù„ÙƒÙ„Ù…Ø©": "ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØªÙˆØ³ÙŠØ¹"
    
    â±ï¸ ØªØºÙŠÙŠØ± ÙˆÙ‚Øª Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø´Ø§Ø¨Ù‡Ø©:
       Ø§Ø¨Ø­Ø« Ø¹Ù†: setTimeout(() => {
       ØºÙŠÙ‘Ø±: 2000 (Ø¨Ø§Ù„Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©)
    
    ğŸ¨ ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ù„ÙˆØ§Ù†:
       Ø§Ø¨Ø­Ø« Ø¹Ù†: :root {
       Ø¹Ø¯Ù‘Ù„: --primary-red, --dark-gray, etc.
    
    ğŸ“Š Ø­Ø¯ÙˆØ¯ API:
       - Demo: 50 Ø·Ù„Ø¨/Ø³Ø§Ø¹Ø©
       - Production: 5000 Ø·Ù„Ø¨/Ø´Ù‡Ø±
    
    ğŸš€ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:
       1. Ø§ÙØªØ­ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
       2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡
       3. Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ!
    
    âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ù…Ù†ÙŠØ©:
       ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø§Ø­Ù…Ù API Key ÙÙŠ Backend!
       Ù‡Ø°Ø§ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø®ØµÙŠ ÙÙ‚Ø·.
    
    ğŸ’¡ Ù†ØµØ§Ø¦Ø­:
       - Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: "mr robot", "anime", "Ø·Ø¨ÙŠØ¹Ø©"
       - Ø§Ø¶ØºØ· âš™ï¸ Ù„ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ
       - Ø§ÙØªØ­ ØµÙˆØ±Ø© ÙˆØ§ØªØ±ÙƒÙ‡Ø§ Ø«Ø§Ù†ÙŠØªÙŠÙ† Ù„ØªØ±Ù‰ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø´Ø§Ø¨Ù‡Ø©
       - Ø§Ù…Ø³Ø­ localStorage Ø¨Ù€: localStorage.clear() ÙÙŠ Console
    
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-red: #e60023;
            --dark-gray: #111111;
            --medium-gray: #767676;
            --light-gray: #efefef;
            --white: #ffffff;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Cairo', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--white);
            color: var(--dark-gray);
            line-height: 1.6;
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            background: var(--white);
            border-bottom: 1px solid var(--light-gray);
            z-index: 100;
            padding: 12px 16px;
            box-shadow: var(--shadow);
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-red);
            text-decoration: none;
            cursor: pointer;
        }

        .logo svg {
            width: 32px;
            height: 32px;
        }

        .search-bar {
            flex: 1;
            max-width: 600px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 48px 12px 20px;
            border: none;
            border-radius: 24px;
            background: var(--light-gray);
            font-size: 16px;
            font-family: 'Cairo', sans-serif;
            outline: none;
            transition: background 0.2s;
        }

        .search-input:focus {
            background: #e0e0e0;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--medium-gray);
            pointer-events: none;
        }

        .clear-search {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--medium-gray);
            cursor: pointer;
            font-size: 20px;
            padding: 4px;
            display: none;
            transition: color 0.2s;
        }

        .clear-search.visible {
            display: block;
        }

        .clear-search:hover {
            color: var(--dark-gray);
        }

        /* Settings Toggle */
        .settings-btn {
            background: var(--light-gray);
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            position: relative;
        }

        .settings-btn:hover {
            background: #e0e0e0;
            transform: scale(1.1);
        }

        .settings-btn.active::after {
            content: '';
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background: #4caf50;
            border-radius: 50%;
            border: 2px solid var(--white);
        }

        /* Quick Tags */
        .quick-tags {
            display: flex;
            gap: 8px;
            padding: 16px;
            max-width: 1600px;
            margin: 0 auto;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .quick-tags::-webkit-scrollbar {
            display: none;
        }

        .tag {
            padding: 8px 16px;
            background: var(--light-gray);
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .tag:hover {
            background: #e0e0e0;
        }

        .tag.active {
            background: var(--dark-gray);
            color: var(--white);
        }

        /* Results Info */
        .results-info {
            max-width: 1600px;
            margin: 0 auto;
            padding: 16px;
            color: var(--medium-gray);
            font-size: 14px;
            display: none;
        }

        .results-info.visible {
            display: block;
        }

        /* Gallery */
        .gallery-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 8px;
        }

        .gallery {
            column-count: 5;
            column-gap: 16px;
        }

        @media (max-width: 1400px) {
            .gallery { column-count: 4; }
        }

        @media (max-width: 1024px) {
            .gallery { column-count: 3; }
        }

        @media (max-width: 768px) {
            .gallery { column-count: 2; }
            .header-content { flex-wrap: wrap; }
            .search-bar { max-width: 100%; }
        }

        @media (max-width: 480px) {
            .gallery { column-count: 1; }
        }

        .pin {
            break-inside: avoid;
            margin-bottom: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .pin:hover {
            transform: translateY(-2px);
        }

        .pin-image-container {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
        }

        .pin img {
            width: 100%;
            display: block;
            border-radius: 16px;
        }

        .pin-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.2), transparent 40%, transparent);
            opacity: 0;
            transition: opacity 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 12px;
        }

        .pin-image-container:hover .pin-overlay {
            opacity: 1;
        }

        .pin-overlay-top {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .pin-menu-btn {
            background: rgba(255, 255, 255, 0.95);
            color: var(--dark-gray);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-weight: bold;
        }

        .pin-menu-btn:hover {
            background: var(--white);
            transform: scale(1.1);
        }

        .pin-overlay-bottom {
            display: flex;
            justify-content: flex-end;
        }

        .pin-save-btn {
            background: var(--primary-red);
            color: var(--white);
            border: none;
            padding: 10px 18px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            transition: all 0.2s;
        }

        .pin-save-btn:hover {
            background: #ad081b;
            transform: scale(1.05);
        }

        .pin-details {
            padding: 12px 8px 4px 8px;
        }

        .pin-title {
            font-size: 14px;
            font-weight: 400;
            color: var(--dark-gray);
            margin-bottom: 8px;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .pin-author {
            font-size: 13px;
            color: var(--medium-gray);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .pin-author-name {
            font-weight: 400;
        }

        .pin-author-name:hover {
            text-decoration: underline;
            cursor: pointer;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .loading.visible {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            margin: 0 auto 16px;
            border: 3px solid var(--light-gray);
            border-top: 3px solid var(--primary-red);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Error */
        .error {
            max-width: 600px;
            margin: 40px auto;
            padding: 24px;
            background: #fff5f5;
            border: 1px solid #ffcccc;
            border-radius: 12px;
            text-align: center;
            color: #d32f2f;
            display: none;
        }

        .error.visible {
            display: block;
        }

        .error-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .error-message {
            font-size: 14px;
            color: var(--medium-gray);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            padding: 40px;
            overflow-y: auto;
        }

        .modal.visible {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
        }

        .modal-image {
            max-width: 100%;
            max-height: 85vh;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-info {
            background: var(--white);
            padding: 24px;
            border-radius: 0 0 12px 12px;
            margin-top: -4px;
        }

        .modal-author {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .modal-description {
            color: var(--dark-gray);
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .modal-stats {
            display: flex;
            gap: 16px;
            color: var(--medium-gray);
            font-size: 14px;
            flex-wrap: wrap;
        }

        .modal-close {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--white);
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-hover);
            transition: transform 0.2s;
        }

        .modal-close:hover {
            transform: scale(1.1);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            display: none;
        }

        .empty-state.visible {
            display: block;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        .empty-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .empty-message {
            color: var(--medium-gray);
            font-size: 16px;
        }

        /* Sentinel for Infinite Scroll */
        .sentinel {
            height: 20px;
            margin: 20px 0;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 20px;
            color: var(--medium-gray);
            font-size: 14px;
            border-top: 1px solid var(--light-gray);
            margin-top: 60px;
        }

        .footer a {
            color: var(--primary-red);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark-gray);
            color: var(--white);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1001;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .toast.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo" id="homeBtn" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M0 12c0 5.123 3.211 9.497 7.73 11.218-.11-.937-.227-2.482.025-3.566.217-.932 1.401-5.938 1.401-5.938s-.357-.715-.357-1.774c0-1.66.962-2.9 2.161-2.9 1.02 0 1.512.765 1.512 1.682 0 1.025-.653 2.557-.99 3.978-.281 1.189.597 2.159 1.769 2.159 2.123 0 3.756-2.239 3.756-5.471 0-2.861-2.056-4.86-4.991-4.86-3.398 0-5.393 2.549-5.393 5.184 0 1.027.395 2.127.889 2.726a.36.36 0 0 1 .083.343c-.091.378-.293 1.189-.332 1.355-.053.218-.173.265-.4.159-1.492-.694-2.424-2.875-2.424-4.627 0-3.769 2.737-7.229 7.892-7.229 4.144 0 7.365 2.953 7.365 6.899 0 4.117-2.595 7.431-6.199 7.431-1.211 0-2.348-.63-2.738-1.373 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24 12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12"></path>
                </svg>
                <span>Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</span>
            </a>

            <div class="search-bar">
                <span class="search-icon" aria-hidden="true">ğŸ”</span>
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput"
                    placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ØµÙˆØ±... (Ø¬Ø±Ù‘Ø¨: mr robot, anime, Ø·Ø¨ÙŠØ¹Ø©)"
                    aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ØµÙˆØ±"
                >
                <button class="clear-search" id="clearBtn" aria-label="Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«" title="Ù…Ø³Ø­">âœ•</button>
            </div>

            <button class="settings-btn" id="settingsBtn" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ" title="Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ - Ø§Ø¶ØºØ· Ù„Ù„ØªÙØ¹ÙŠÙ„/Ø§Ù„ØªØ¹Ø·ÙŠÙ„">âš™ï¸</button>
        </div>
    </header>

    <!-- Quick Tags -->
    <div class="quick-tags" id="quickTags">
        <button class="tag" data-search="nature" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©">ğŸŒ¿ Ø·Ø¨ÙŠØ¹Ø©</button>
        <button class="tag" data-search="technology" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§">ğŸ’» ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</button>
        <button class="tag" data-search="animals" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª">ğŸ¾ Ø­ÙŠÙˆØ§Ù†Ø§Øª</button>
        <button class="tag" data-search="architecture" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù…Ø§Ø±Ø©">ğŸ›ï¸ Ø¹Ù…Ø§Ø±Ø©</button>
        <button class="tag" data-search="food" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ø¹Ø§Ù…">ğŸ• Ø·Ø¹Ø§Ù…</button>
        <button class="tag" data-search="travel" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³ÙØ±">âœˆï¸ Ø³ÙØ±</button>
        <button class="tag" data-search="art" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙÙ†">ğŸ¨ ÙÙ†</button>
        <button class="tag" data-search="business" aria-label="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø¹Ù…Ø§Ù„">ğŸ’¼ Ø£Ø¹Ù…Ø§Ù„</button>
    </div>

    <!-- Results Info -->
    <div class="results-info" id="resultsInfo"></div>

    <!-- Loading -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
    </div>

    <!-- Error -->
    <div class="error" id="error">
        <div class="error-title">Ø¹Ø°Ø±Ø§Ù‹!</div>
        <div class="error-message" id="errorMessage"></div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" id="emptyState">
        <div class="empty-icon">ğŸ”</div>
        <div class="empty-title">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>
        <div class="empty-message">Ø­Ø§ÙˆÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ù…Ø®ØªÙ„ÙØ©</div>
    </div>

    <!-- Gallery -->
    <div class="gallery-container">
        <div class="gallery" id="gallery"></div>
        <div class="sentinel" id="sentinel"></div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ± Ù…Ù† <a href="https://unsplash.com" target="_blank">Unsplash</a> â€¢ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ ğŸ¤– â€¢ ØµÙ†Ø¹ Ø¨Ù€ â¤ï¸</p>
    </footer>

    <!-- Modal -->
    <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalAuthor">
        <button class="modal-close" id="modalClose" aria-label="Ø¥ØºÙ„Ø§Ù‚">âœ•</button>
        <div class="modal-content">
            <img class="modal-image" id="modalImage" alt="">
            <div class="modal-info">
                <div class="modal-author" id="modalAuthor"></div>
                <div class="modal-stats" id="modalStats"></div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                    âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âš ï¸ ØªØ­Ø°ÙŠØ±: ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø§Ø­Ù…Ù API Key ÙÙŠ Backend!
        
        const CONFIG = {
            API_KEY: 'p72LAkg7mz2dLiG681O7ZkUhwa3CEQM5uccC3rmoQrE', // ğŸ‘ˆ Ø¶Ø¹ Ù…ÙØªØ§Ø­Ùƒ Ù‡Ù†Ø§
            API_URL: 'https://api.unsplash.com',
            INITIAL_LOAD: 15,      // Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
            PER_PAGE: 15,          // Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± ÙÙŠ ÙƒÙ„ ØµÙØ­Ø©
            CACHE_TIME: 5 * 60 * 1000 // Ù…Ø¯Ø© Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø¤Ù‚Øª (5 Ø¯Ù‚Ø§Ø¦Ù‚)
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //              ğŸ” ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Query Expansion)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // Ø£Ø¶Ù ÙƒÙ„Ù…Ø§ØªÙƒ Ø§Ù„Ø®Ø§ØµØ© Ù‡Ù†Ø§ Ù„ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«
        
        const QUERY_MAP = {
            // Ø´Ø®ØµÙŠØ§Øª ÙˆÙ…Ø³Ù„Ø³Ù„Ø§Øª
            "mr robot": "mr robot hacker dark aesthetic cyberpunk hoodie",
            "rami malek": "rami malek cinematic portrait dark mood",
            "elliot alderson": "mr robot elliot alderson hacker cyberpunk",
            
            // Ø£Ù†ÙˆØ§Ø¹ Ø¹Ø§Ù…Ø©
            "anime": "anime dark aesthetic cinematic",
            "hacker": "hacker cyberpunk dark coding night",
            
            // ÙƒÙ„Ù…Ø§Øª Ø¹Ø±Ø¨ÙŠØ© Ø´Ø§Ø¦Ø¹Ø©
            "Ø·Ø¨ÙŠØ¹Ø©": "nature landscape mountains forest scenic",
            "Ù…Ø¯Ù†": "city urban architecture skyline night",
            "Ø­ÙŠÙˆØ§Ù†Ø§Øª": "animals wildlife nature portrait",
            "ÙÙ†": "art creative illustration painting",
            "ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§": "technology futuristic modern minimal",
            "Ø³ÙØ±": "travel adventure landscape mountains beach",
            
            // ğŸ‘‡ Ø£Ø¶Ù ÙƒÙ„Ù…Ø§ØªÙƒ Ù‡Ù†Ø§...
            // "Ø§Ù„ÙƒÙ„Ù…Ø©": "ÙƒÙ„Ù…Ø§Øª ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø¨Ø­Ø«"
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                   ğŸ’¾ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (State)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let state = {
            currentPage: 1,
            currentQuery: '',
            isLoading: false,
            hasMore: true,
            cache: new Map(),
            taste: JSON.parse(localStorage.getItem('userTaste') || '[]'), // ğŸ§  Ø°Ø§ÙƒØ±Ø© Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ
            autoRelated: JSON.parse(localStorage.getItem('autoRelated') || 'true') // ğŸ¤– Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                    ğŸ¯ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø© (DOM)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const elements = {
            gallery: document.getElementById('gallery'),
            loading: document.getElementById('loading'),
            error: document.getElementById('error'),
            errorMessage: document.getElementById('errorMessage'),
            emptyState: document.getElementById('emptyState'),
            searchInput: document.getElementById('searchInput'),
            clearBtn: document.getElementById('clearBtn'),
            homeBtn: document.getElementById('homeBtn'),
            settingsBtn: document.getElementById('settingsBtn'),
            resultsInfo: document.getElementById('resultsInfo'),
            modal: document.getElementById('modal'),
            modalImage: document.getElementById('modalImage'),
            modalAuthor: document.getElementById('modalAuthor'),
            modalStats: document.getElementById('modalStats'),
            modalClose: document.getElementById('modalClose'),
            sentinel: document.getElementById('sentinel'),
            quickTags: document.querySelectorAll('.tag'),
            toast: document.getElementById('toast')
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                 ğŸ’¾ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø¤Ù‚Øª (Cache)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function getCacheKey(query, page) {
            return `${query || 'random'}_${page}`;
        }

        function getFromCache(key) {
            const cached = state.cache.get(key);
            if (cached && Date.now() - cached.timestamp < CONFIG.CACHE_TIME) {
                return cached.data;
            }
            state.cache.delete(key);
            return null;
        }

        function setCache(key, data) {
            state.cache.set(key, {
                data,
                timestamp: Date.now()
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                  ğŸŒ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API (Fetch Photos)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function fetchPhotos(query = '', page = 1) {
            // ğŸ” ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø¨Ø­Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            if (query) {
                query = QUERY_MAP[query.toLowerCase()] || query;
            }

            const cacheKey = getCacheKey(query, page);
            const cached = getFromCache(cacheKey);
            
            if (cached) {
                return cached;
            }

            const endpoint = query
                ? `${CONFIG.API_URL}/search/photos?query=${encodeURIComponent(query)}&page=${page}&per_page=${CONFIG.PER_PAGE}`
                : `${CONFIG.API_URL}/photos?page=${page}&per_page=${CONFIG.PER_PAGE}`;

            const response = await fetch(`${endpoint}&client_id=${CONFIG.API_KEY}`);

            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
            if (response.status === 403) {
                throw new Error('QUOTA_EXCEEDED');
            }

            if (response.status === 429) {
                throw new Error('RATE_LIMIT');
            }

            if (!response.ok) {
                throw new Error('NETWORK_ERROR');
            }

            const data = await response.json();
            const result = query ? data.results : data;
            
            setCache(cacheKey, { photos: result, total: data.total || null });
            
            return { photos: result, total: data.total || null };
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                    ğŸ¨ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UI)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function showLoading() {
            elements.loading.classList.add('visible');
        }

        function hideLoading() {
            elements.loading.classList.remove('visible');
        }

        function showError(type) {
            const messages = {
                QUOTA_EXCEEDED: 'ØªÙ… Ø§Ø³ØªÙ†ÙØ§Ø¯ Ø§Ù„Ø­ØµØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù…Ù† API. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.',
                RATE_LIMIT: 'ØªÙ… ØªØ¬Ø§ÙˆØ² Ø­Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹.',
                NETWORK_ERROR: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.',
                NO_RESULTS: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬. Ø­Ø§ÙˆÙ„ ÙƒÙ„Ù…Ø§Øª Ø¨Ø­Ø« Ø£Ø®Ø±Ù‰.'
            };

            elements.errorMessage.textContent = messages[type] || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹.';
            elements.error.classList.add('visible');
            setTimeout(() => elements.error.classList.remove('visible'), 5000);
        }

        function showEmptyState() {
            elements.emptyState.classList.add('visible');
        }

        function hideEmptyState() {
            elements.emptyState.classList.remove('visible');
        }

        function updateResultsInfo(total, query) {
            if (total !== null) {
                elements.resultsInfo.textContent = `${total.toLocaleString('ar-EG')} Ù†ØªÙŠØ¬Ø© Ù„Ù€ "${query}"`;
                elements.resultsInfo.classList.add('visible');
            } else {
                elements.resultsInfo.classList.remove('visible');
            }
        }

        function showToast(message, duration = 3000) {
            elements.toast.textContent = message;
            elements.toast.classList.add('visible');
            setTimeout(() => {
                elements.toast.classList.remove('visible');
            }, duration);
        }

        function createPhotoCard(photo) {
            const pin = document.createElement('div');
            pin.className = 'pin';
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†/Ø§Ù„ÙˆØµÙ
            const title = photo.alt_description || photo.description || '';
            const truncatedTitle = title.length > 60 ? title.substring(0, 60) + '...' : title;
            
            pin.innerHTML = `
                <div class="pin-image-container">
                    <img src="${photo.urls.small}" alt="${photo.alt_description || 'ØµÙˆØ±Ø©'}" loading="lazy">
                    <div class="pin-overlay">
                        <div class="pin-overlay-top">
                            <button class="pin-menu-btn" aria-label="Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª" title="Ø§Ù„Ù…Ø²ÙŠØ¯">â‹¯</button>
                        </div>
                        <div class="pin-overlay-bottom">
                            <button class="pin-save-btn" aria-label="Ø­ÙØ¸">Ø­ÙØ¸</button>
                        </div>
                    </div>
                </div>
                <div class="pin-details">
                    ${truncatedTitle ? `<div class="pin-title">${truncatedTitle}</div>` : ''}
                    <div class="pin-author">
                        <span class="pin-author-name">${photo.user.name}</span>
                    </div>
                </div>
            `;

            // ÙØªØ­ Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
            pin.querySelector('.pin-image-container').addEventListener('click', (e) => {
                if (!e.target.closest('button')) {
                    openModal(photo);
                }
            });

            // Ù…Ù†Ø¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ù† ÙØªØ­ Ø§Ù„ØµÙˆØ±Ø©
            const saveBtn = pin.querySelector('.pin-save-btn');
            const menuBtn = pin.querySelector('.pin-menu-btn');
            
            saveBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                showToast('ğŸ’¾ Ù…ÙŠØ²Ø© Ø§Ù„Ø­ÙØ¸ Ù‚Ø±ÙŠØ¨Ø§Ù‹!');
            });

            menuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                showToast('â‹¯ Ù…ÙŠØ²Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹!');
            });

            return pin;
        }

        function displayPhotos(photos) {
            photos.forEach(photo => {
                const card = createPhotoCard(photo);
                elements.gallery.appendChild(card);
            });
        }

        function clearGallery() {
            elements.gallery.innerHTML = '';
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                  ğŸ–¼ï¸ Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© (Modal)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function openModal(photo) {
            elements.modalImage.src = photo.urls.regular;
            elements.modalImage.alt = photo.alt_description || 'ØµÙˆØ±Ø©';
            
            const title = photo.alt_description || photo.description || '';
            
            elements.modalAuthor.innerHTML = `
                <strong style="font-size: 18px;">${photo.user.name}</strong>
                ${photo.user.username ? `<span style="color: var(--medium-gray); font-weight: 400; font-size: 14px;">@${photo.user.username}</span>` : ''}
            `;
            
            elements.modalStats.innerHTML = `
                ${title ? `<div class="modal-description">${title}</div>` : ''}
                <div style="display: flex; gap: 16px; color: var(--medium-gray); font-size: 14px; flex-wrap: wrap;">
                    <span>â¤ï¸ ${photo.likes.toLocaleString('ar-EG')} Ø¥Ø¹Ø¬Ø§Ø¨</span>
                    ${photo.downloads ? `<span>â¬‡ï¸ ${photo.downloads.toLocaleString('ar-EG')} ØªØ­Ù…ÙŠÙ„</span>` : ''}
                    ${photo.width && photo.height ? `<span>ğŸ“ ${photo.width} Ã— ${photo.height}</span>` : ''}
                </div>
            `;
            
            elements.modal.classList.add('visible');
            document.body.style.overflow = 'hidden';

            // ğŸ§  ØªØ®Ø²ÙŠÙ† Ø°ÙˆÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø¢Ø®Ø± 5 ØµÙˆØ±)
            if (photo.alt_description) {
                state.taste.push(photo.alt_description);
                if (state.taste.length > 5) {
                    state.taste.shift();
                }
                localStorage.setItem('userTaste', JSON.stringify(state.taste));
            }

            // ğŸ¤– ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ù…Ø´Ø§Ø¨Ù‡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (Ø¥Ø°Ø§ Ù…ÙØ¹Ù‘Ù„)
            if (state.autoRelated) {
                setTimeout(() => {
                    const relatedQuery = photo.alt_description || photo.description || state.currentQuery;
                    
                    if (relatedQuery && relatedQuery !== state.currentQuery) {
                        closeModal();
                        
                        showToast('ğŸ” Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ù…Ø´Ø§Ø¨Ù‡Ø©...');
                        
                        setTimeout(() => {
                            state.currentQuery = relatedQuery;
                            state.currentPage = 1;
                            state.hasMore = true;
                            const shortQuery = relatedQuery.split(' ').slice(0, 3).join(' ');
                            elements.searchInput.value = shortQuery;
                            elements.clearBtn.classList.add('visible');
                            loadPhotos(relatedQuery, 1, false);
                        }, 300);
                    }
                }, 2000); // ğŸ‘ˆ ØºÙŠÙ‘Ø± Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ù„ØªØºÙŠÙŠØ± ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (Ø¨Ø§Ù„Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©)
            }
        }

        function closeModal() {
            elements.modal.classList.remove('visible');
            document.body.style.overflow = '';
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                    ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± (Load Photos)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function loadPhotos(query = '', page = 1, append = false) {
            if (state.isLoading) return;

            state.isLoading = true;
            showLoading();
            hideEmptyState();

            if (!append) {
                clearGallery();
            }

            try {
                const { photos, total } = await fetchPhotos(query, page);

                if (photos.length === 0) {
                    if (page === 1) {
                        showEmptyState();
                    }
                    state.hasMore = false;
                } else {
                    displayPhotos(photos);
                    state.hasMore = photos.length === CONFIG.PER_PAGE;
                    
                    if (query && page === 1) {
                        updateResultsInfo(total, query);
                    }
                }

            } catch (error) {
                console.error('Error loading photos:', error);
                showError(error.message);
                state.hasMore = false;
            } finally {
                hideLoading();
                state.isLoading = false;
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                      ğŸ” Ø§Ù„Ø¨Ø­Ø« (Search)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function handleSearch() {
            let query = elements.searchInput.value.trim();
            
            if (!query) return;

            // ğŸ§  Ø¯Ù…Ø¬ Ø°ÙˆÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¨Ø­Ø« (Ø¢Ø®Ø± 3 Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª)
            if (state.taste.length > 0) {
                const tasteQuery = state.taste.slice(-3).join(" ");
                query = query + " " + tasteQuery;
            }
            
            if (query === state.currentQuery) return;

            state.currentQuery = query;
            state.currentPage = 1;
            state.hasMore = true;

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ³ÙˆÙ…
            elements.quickTags.forEach(tag => {
                tag.classList.toggle('active', tag.dataset.search === elements.searchInput.value.trim());
            });

            // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„Ù…Ø³Ø­
            elements.clearBtn.classList.toggle('visible', elements.searchInput.value.length > 0);

            loadPhotos(query, 1, false);
        }

        function clearSearch() {
            elements.searchInput.value = '';
            elements.clearBtn.classList.remove('visible');
            state.currentQuery = '';
            state.currentPage = 1;
            elements.quickTags.forEach(tag => tag.classList.remove('active'));
            elements.resultsInfo.classList.remove('visible');
            loadPhotos('', 1, false);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //              â™¾ï¸ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠ (Infinite Scroll)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && state.hasMore && !state.isLoading) {
                    state.currentPage++;
                    loadPhotos(state.currentQuery, state.currentPage, true);
                }
            });
        }, {
            rootMargin: '200px'
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                  ğŸ® Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Event Listeners)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // Ø§Ù„Ø¨Ø­Ø«
        elements.searchInput.addEventListener('input', () => {
            const hasValue = elements.searchInput.value.length > 0;
            elements.clearBtn.classList.toggle('visible', hasValue);
        });

        elements.searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSearch();
        });

        elements.clearBtn.addEventListener('click', clearSearch);

        elements.homeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            clearSearch();
        });

        // Ø§Ù„ÙˆØ³ÙˆÙ… Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
        elements.quickTags.forEach(tag => {
            tag.addEventListener('click', () => {
                elements.searchInput.value = tag.dataset.search;
                handleSearch();
            });
        });

        // Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ)
        elements.settingsBtn.addEventListener('click', () => {
            state.autoRelated = !state.autoRelated;
            localStorage.setItem('autoRelated', JSON.stringify(state.autoRelated));
            elements.settingsBtn.classList.toggle('active', state.autoRelated);
            const status = state.autoRelated ? 'Ù…ÙØ¹Ù‘Ù„ âœ¨' : 'Ù…Ø¹Ø·Ù‘Ù„';
            const emoji = state.autoRelated ? 'ğŸ¤–' : 'ğŸ‘¤';
            showToast(`${emoji} Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ ${status}`);
        });

        // Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        elements.modalClose.addEventListener('click', closeModal);

        elements.modal.addEventListener('click', (e) => {
            if (e.target === elements.modal) closeModal();
        });

        // Ø²Ø± ESC Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && elements.modal.classList.contains('visible')) {
                closeModal();
            }
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                    ğŸš€ Ø§Ù„ØªØ´ØºÙŠÙ„ (Initialize)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        elements.settingsBtn.classList.toggle('active', state.autoRelated);
        
        // Ø¨Ø¯Ø¡ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠ
        observer.observe(elements.sentinel);
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø£ÙˆÙ„Ù‰
        loadPhotos('', 1, false);

        // ğŸ‰ Ø¥Ø´Ø¹Ø§Ø± ØªØ±Ø­ÙŠØ¨ÙŠ
        setTimeout(() => {
            if (state.autoRelated) {
                showToast('ğŸ¤– Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ Ù…ÙØ¹Ù‘Ù„! Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§ÙØªØ­ ØµÙˆØ±Ø©', 4000);
            }
        }, 1000);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //                  ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ± (Console)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘               Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø°ÙƒÙŠ v2.0                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ¤– Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ: ${state.autoRelated ? 'Ù…ÙØ¹Ù‘Ù„ âœ…' : 'Ù…Ø¹Ø·Ù‘Ù„ âŒ'}                         â•‘
â•‘  ğŸ§  Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©: ${state.taste.length} ØµÙˆØ±Ø©                        â•‘
â•‘  âš™ï¸ Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ù„ØªØ­ÙƒÙ…                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ’¡ Ù†ØµØ§Ø¦Ø­:                                                     â•‘
â•‘     - Ø¬Ø±Ù‘Ø¨: "mr robot", "anime", "Ø·Ø¨ÙŠØ¹Ø©"                      â•‘
â•‘     - Ø§ÙØªØ­ ØµÙˆØ±Ø© ÙˆØ§ØªØ±ÙƒÙ‡Ø§ Ø«Ø§Ù†ÙŠØªÙŠÙ†                              â•‘
â•‘     - localStorage.clear() Ù„Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        `);
    </script>
</body>
</html>